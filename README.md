# OIDC Workshop

## Mission
- We want to do the tutorial [oidc-workshop](https://github.com/andifalk/secure-oauth2-oidc-workshop)
- The [slides](https://andifalk.github.io/oidc-workshop-spring-io-2019/#/) contains the corresponding theory.
- We want to do it local first.
- If it works we will deploy it on openshift.

## Preparation
- install Intelli/J
- install git and check commit
- install Postman
- complete [Springboot tutorials by Joachim Prinzbach](https://confluence.baloisenet.com/atlassian/pages/viewpage.action?pageId=1840186564)
- Perfom steps for [tutorial pre-requisites](https://andifalk.gitbook.io/openid-connect-workshop/introduction/setup)

## OAUTH 2.0 and OIDC
### OAUTH 2.0
OAuth 2.0 is the industry-standard protocol for authorization. OAuth 2.0 focuses on client developer simplicity while
 providing specific authorization flows for web applications, desktop applications, mobile phones, and living room 
 devices. This specification and its extensions are being developed within the IETF OAuth Working Group. 

![](./img/oauth2.png)

### OIDC
OpenID Connect is a simple identity layer on top of the OAuth 2.0 protocol, which allows computing clients to verify
the identity of an end-user based on the authentication performed by an authorization server, as well as to obtain
basic profile information about the end-user in an interoperable and REST-like manner. In technical terms, OpenID
Connect specifies a RESTful HTTP API, using JSON as a data format.  

OpenID Connect allows a range of kinds of clients, including Web-based, mobile, and JavaScript clients, to request and 
receive information about authenticated sessions and end-users. The specification suite is extensible, supporting
optional features such as encryption of identity data, discovery of OpenID Providers, and session management.

![](./img/oidc.png)

#### Additions to OAuth 2.0 
- Id Token (JWT format) 
- User Info Endpoint  
- OpenID Provider Configuration Information 

## Basic, Digest und Bearer Token 
**Basic authentication** transmits credentials as user ID/password pairs, encoded using base64. The client sends HTTP
requests with the Authorization header that contains the word Basic word followed by a space and a base64-encoded
string username:password. 

```
Authorization: Basic ZGVtbzpwQDU1dzByZA==
```

![](./img/basic.png)

*Note*: For basic authentication, as the user ID and password are passed over the network as clear text (it is base64
encoded, but base64 is a reversible encoding), the basic authentication scheme is not secure. HTTPS / TLS should be
used in conjunction with basic authentication. 

**Bearer authentication** (also called token authentication) has security tokens called bearer tokens. The name “Bearer
authentication” can be understood as “give access to the bearer of this token.” The bearer token is a cryptic string,
usually generated by the server in response to a login request. The client must send this token in the Authorization
header when making requests to protected resources:  

```
Authorization: Bearer < token >
```

![](./img/bearer.png)

*Note*: Similarly to Basic authentication, Bearer authentication should only be used over HTTPS (SSL). 

## Keycloak
### Groups vs. Roles
In the IT world the concepts of Group and Role are often blurred and interchangeable. In keycloak, Groups are just a
collection of users that you can apply roles and attributes to in one place. Roles define a type of user and
applications assign permission and access control to roles.

Arn’t Composite Roles also similar to Groups? Logically they provide the same exact functionality, but the difference
is conceptual. Composite roles should be used to apply the permission model to your set of services and applications.
Groups should focus on collections of users and their roles in your organization. Use groups to manage users. Use
composite roles to manage applications and services.


## Glossary
| Term            | Description                                                                                                                                                                                 |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| jwt             | JSON Web Token                                                                                                                                                                              |
| OAUTH           | Open Authorization, Protocol specified in [RFC 6749](https://tools.ietf.org/html/rfc6749)                                                                                                   |
| OIDC            | Open ID Connect, OAUTH 2.0 Standard                                                                                                                                                         |
| Authentication  | Authentication is the act of validating that users are who they claim to be                                                                                                                 |
| Authorisation   | Authorization in system security is the process of giving the user permission to access a specific resource or function                                                                     |
| Pkce (pixie)    | Proof Key for Code Exchange<br/>PKCE ([RFC 7636](https://tools.ietf.org/html/rfc6749)) is an extension to the Authorization Code flow to prevent several attacks and to be able to securely perform the OAuth exchange from public clients.<br/>It was originally designed to protect mobile apps, but its ability to prevent authorization code injection makes it useful for every OAuth client, even web apps that use a client secret.  |
| jwk             | JSON Web Key                                                                                                                                                                                |
| IAM             | Identity and Access Management                                                                                                                                                              |
| CORS            | Cross-origin resource sharing                                                                                                                                                               |
| CSRF            | Cross site request forgery                                                                                                                                                                  |
